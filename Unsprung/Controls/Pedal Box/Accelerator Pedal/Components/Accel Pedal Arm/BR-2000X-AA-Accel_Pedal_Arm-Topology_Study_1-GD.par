DRIVER
  os.environ['SMA_TSO_COSMOS_ELEMAT'] = '1'
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.ste*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcd*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcm*' ], 'SAVE.ste', '' )
END_

FEM_INPUT
  ID_NAME = BR-2000X-AA-Accel_Pedal_Arm-Topology_Study_1_1
  FILE = BR-2000X-AA-Accel Pedal Arm-Topology Study 1.NOD
END_

*SET_DB,rint,130,1

GROUP_DEF
  ID_NAME = FROZEN_AREA_ELEMS_GRP_1
  TYPE=ELEM
  FORMAT=LIST
  LIST_BEGIN
8,9,10,11,25,35,36,52,80,83,89,91,92,93,94,95,96,97,98,100,204,231,232,233,234,235,256,257,
301,302,303,304,305,306,307,308,312,313,314,315,316,325,340,341,342,343,344,362,363,364,365,
366,367,374,408,425,426,427,428,429,440,454,455,458,477,478,480,481,483,484,485,486,487,488,
489,491,492,493,494,495,496,497,498,499,500,501,502,512,513,514,515,516,517,536,537,538,541,
542,567,568,569,570,571,572,699,754,783,784,785,786,787,788,789,790,791,803,804,805,806,822,
823,824,826,827,828,836,839,849,850,851,852,866,898,899,911,969,970,971,1019,1021,1022,1026,
1027,1028,1029,1030,1032,1033,1034,1035,1036,1037,1038,1041,1042,1043,1044,1045,1074,1075,
1077,1078,1079,1086,1087,1088,1089,1090,1132,1133,1134,1135,1136,1137,1138,1163,1164,1165,
1166,1181,1182,1183,1184,1185,1187,1188,1190,1191,1192,1199,1200,1201,1250,1252,1253,1254,
1255,1256,1262,1263,1264,1265,1266,1267,1268,1270,1271,1272,1298,1299,1300,1301,1303,1376,
1377,1378,1379,1380,1381,1382,1383,1384,1385,1386,1387,1388,1389,1390,1391,1393,1394,1395,
1396,1397,1398,1399,1400,1401,1402,1418,1434,1435,1436,1437,1438,1439,1440,1491,1492,1493,
1494,1495,1496,1536,1538,1539,1540,1541,1542,1543,1544,1545,1546,1547,1548,1569,1571,1572,
1581,1585,1597,1598,1599,1600,1601,1610,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,
1621,1643,1645,1710,1711,1713,1714,1715,1729,1730,1731,1732,1733,1735,1736,1743,1805,1810,
1827,1828,1829,1830,1834,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1917,1919,
1926,1927,1928,1931,1932,1944,1945,1948,1950,1973,1976,1977,1978,1979,1980,1981,2056,2057,
2058,2146,2147,2188,2198,2199,2248,2253,2254,2255,2256,2257,2312,2313,2314,2317,2323,2326,
2327,2344,2450,2451,2452,2460,2499,2501,2503,2504,2506,2508,2509,2533,2536,2541,2542,2547,
2559,2561,2563,2564,2566,2568,2570,2581,2629,2630,2631,2632,2633,2639,2646,2647,2671,2682,
2687,2729,2756,2768,2773,2774,2777,2778,2794,2797,2799,2802,2806,2807,2808,2813,2816,2859,
2863,2865,2866,2867,2873,2880,2897,2901,2902,2905,2908,2910,2915,2916,2918,2919,2922,2924,
2933,2999,3000,3001,3002,3003,3038,3044,3046,3059,3060,3061,3062,3063,3066,3067,3068,3074,
3075,3076,3109,3121,3160,3165,3177,3180,3183,3281,3283,3284,3285,3287,3288,3289,3290,3293,
3295,3296,3310,3317,3319,3323,3325,3329,3331,3355,3404,3405,3424,3426,3428,3430,3434,3437,
3438,3460,3461,3462,3463,3533,3539,3541,3557,3566,3572,3574,3579,3580,3581,3582,3584,3585,
3589,3592,3681,3682,3712,3773,3824,3827,3845,3848,3850,3851,3852,3862,3874,3882,3886,3888,
3889,3890,3893,3894,3903,3905,3907,3908,3909,3929,3930,3931,3932,3933,3940,4015,4017,4019,
4020,4024,4025,4029,4107,4108,4110,4112,4114,4116,4124,4128,4134,4175,4176,4184,4185,4187,
4192,4201,4208,4216,4234,4249,4254,4395,4399,4401,4403,4406,4458,4461,4466,4467,4471,4472,
4476,4539,4540,4542,4546,4547,4548,4549,4579,4582,4587,4589,4590,4591,4621,4625,4631,4642,
4655,4669,4678,4684,4685,4693,4700,4703,4711,4722,4757,4758,4759,4822,4824,4835,4837,4838,
4839,4861,4862,4864,4865,4866,4867,4870,4871,4872,4876,4877,4879,4880,4881,4882,4885,4886,
4889,4890,4891,4892,4894,4895,4896,4897,4899,4901,4902,4903,4904,4905,4907,4908,4909,4910,
4911,4912,4914,4916,4917,4918,4919,4922,4923,4924,4925,4926,4928,4931,4932,4934,4935,4937,
4938,4941,4945,4948,4949,4950,4951,4952,4953,4954,4955,4962,4963,4964,4966,4969,5087,5088,
5089,5090,5091,5101,5155,5160,5161,5165,5182,5184,5186,5188,5190,5191,5192,5193,5197,5204,
5206,5207,5208,5270,5272,5280,5282,5283,5287,5289,5291,5292,5320,5321,5328,5389,5390,5392,
5395,5399,5400,5401,5453,5502,5556,5557,5562,5610,5614,5615,5616,5623,5626,5629,5631,5632,
5645,5695,5707,5715,5716,5717,5718,5719,5720,5721,5722,5723,5724,5725,5727,5729,5734,5738,
5753,5766,5793,5794,5804,5805,5806,5808,5811,5815,5873,5912,5921,5922,5927,5928,5935,5945,
5947,5948,5950,5955,5964,5968,5977,5986,6085,6207,6231,6247,6251,6255,6259,6263,6267,6271,
6272,6273,6275,6276,6277,6280,6284,6339,6391,6413,6460,6461,6462,6464,6465,6468,6469,6474,
6475,6481,6482,6484,6486,6487,6488,6489,6492,6497,6498,6500,6501,6502,6503,6509,6510,6511,
6513,6514,6515,6516,6517,6518,6519,6520,6523,6524,6525,6532,6534,6535,6536,6538,6539,6545,
6549,6550,6551,6552,6556,6557,6559,6560,6625,6626,6627,6629,6660,6662,6664,6675,6677,6679,
6681,6753,6755,6756,6763,6841,6842,6856,6859,6888,6947,6977,6994,6995,6996,6998,6999,7000,
7001,7002,7042,7044,7048,7051,7055,7067,7075,7107,7108,7110,7111,7112,7128,7129,7130,7132,
7136,7138,7139,7141,7142,7143,7150,7152,7165,7166,7167,7234,7235,7237,7238,7285,7286,7293,
7295,7296,7299,7301,7302,7308,7309,7322,7323,7324,7329,7335,7342,7403,7404,7405,7406,7407,
7408,7409,7494,7496,7498,7554,7611,7615,7616,7652,7657,7658,7659,7662,7663,7664,7684,7686,
7689,7690,7691,7693,7694,7695,7696,7697,7698,7701,7702,7704,7705,7707,7708,7709,7710,7713,
7714,7720,7721,7722,7723,7724,7726,7727,7734,7739,7743,7744,7747,7748,7751,7753,7754,7755,
7756,7757,7764,7766,7773,7774,7776,7777,7798,7799,7800,7801,7802,7804,7805,7806,7819,7820,
7822,7824,7825,7830,7833,7838,7855,7856,7861,7863,7864,7865,7871,7889,7918,7934,7963,7965,
7966,7967,7978,7981,7987,7988,7991,7992,7994,7997,7998,7999,8000,8001,8002,8003,8005,8006,
8009,8011,8051,8056,8058,8060,8062,8063,8064,8065,8067,8071,8079,8080,8081,8159,8160,8162,
8164,8233,8234,8235,8237,8239,8247,8248,8251,8302,8304,8306,8310,8311,8314,8340,8341,8401,
8410,8413,8414,8417,8418,8424,8464,8465,8469,8474,8479,8480,8481,8482,8484,8485,8486,8489,
8500,8501,8503,8505,8506,8507,8511,8513,8516,8680,8688,8721,8722,8731,8733,8791,8793,8795,
8796,8800,8803,8844,8845,8846,8850,8852,8853,8854,8855,8861,8862,8863,8864,8865,8866,8867,
8869,8870,8872,8874,8875,8878,8880,8881,8883,8884,8886,8887,8888,8892,8893,8894,8899,8900,
8902,8904,8905,8914,8915,8918,8920,8921,8924,8925,8926,8928,8930,8932,8934,8972,8973,8975,
8976,8977,9043,9044,9050,9057,9058,9138,9141,9178,9179,9180,9333,9336,9337,9342,9344,9397,
9398,9399,9400,9401,9402,9403,9404,9422,9423,9424,9498,9499,9517,9519,9522,9523,9526,9529,
9530,9531,9583,9584,9604,9654,9656,9658,9754,9755,9756,9757,9760,9761,9763,9764,9770,9771,
9772,9773,9776,9777,9778,9779,9785,9786,9788,9789,9791,9794,9795,9850,9854,9855,9856,9870,
9873,9874,9880,9884,9905,9907,9911,9916,9917,9920,9923,9924,9925,9926,9927,9928,9929,9931,
9932,9934,9941,9942,9944,9946,9948,9952,9953,9954,9955,9993,10043,10070,10119,10122,10151,
10173,10183,10187,10188,10189,10190,10191,10192,10206,10210,10211,10213,10214,10216,10217,
10219,10220,10221,10223,10228,10229,10230,10231,10252,10254,10258,10260,10262,10289,10294,
10306,10309,10310,10320,10334,10344,10349,10350,10356,10390,10399,10432,10433,10435,10494,
10496,10529,10531,10562,10564,10569,10570,10575,10578,10579,10580,10583,10585,10587,10588,
10589,10590,10593,10599,10600,10601,10604,10605,10606,10607,10609,10614,10615,10617,10618,
10619,10620,10623,10625,10631,10634,10636,10637,10638,10719,10772,10779,10787,10788,10790,
10792,10812,10813,10846,10848,10853,10854,10859,10862,10927,10941,10945,10949,10950,10951,
10952,10953,10961,10964,10966,10970,10971,10998,11030,11032,11035,11038,11040,11041,11044,
11045,11046,11052,11056,11094,11159,11161,11172,11218,11220,11230,11231,11235,11237,11245,
11246,11272,11273,11275,11301,11302,11324,11334,11335,11336,11341,11342,11343,11344,11347,
11349,11351,11359,11360,11375,11433,11438,11439,11440,11446,11450,11453,11454,11458,11459,
11470,11493,11496,11499,11502,11508,11515,11534,11569,11623,11625,11626,11629,11630,11631,
11634,11647,11650,11654,11656,11688,11704,11798,11803,11810,11814,11825,11826,11827,11853,
11855,11857,11889,11902,11903,11905,11906,11907,11913,11920,11921,11925,11926,11932,11933,
11935,11938,11941,11942,11943,11944,11945,11946,11948,11949,11950,11951,11952,11953,11954,
11956,11959,11961,11965,11967,11968,11969,11971,11972,11978,11980,11982,11983,11984,11985,
11986,11990,11991,11998,11999,12000,12001,12005,12010,12011,12022,12065,12066,12067,12068,
12071,12072,12073,12074,12093,12094,12095,12096,12109,12110,12112,12113,12115,12116,12149,
12163,12222,12224,12225,12231,12232,12233,12236,12256,12257,12306,12307,12315,12317,12319,
12320,12321,12325,12364,12368,12389,12396,12400,12407,12408,12409,12410,12412,12414,12417,
12418,12422,12425,12426,12427,12428,12429,12431,12433,12436,12437,12438,12439,12441,12442,
12443,12444,12446,12448,12449,12457,12460,12463,12464,12465,12466,12520,12521,12523,12524,
12527,12538,12540,12553,12576,12610,12612,12632,12636,12637,12638,12641,12643,12680,12713,
12746,12753,12764,12775,12777,12779,12789,12791,12796,12797,12798,12799,12805,12807,12808,
12812,12817,12822,12826,12827,12828,12829,12830,12831,12835,12836,12838,12839,12841,12842,
12844,12845,12847,12848,12850,12853,12854,12855,12856,12858,12860,12872,12875,12876,12890,
12943,12948,12951,12952,12971,12983,12987,12991,12992,12994,13031,13043,13047,13086,13087,
13088,13090,13136,13151,13175,13182,13229,13230,13231,13232,13233,13238,13239,13240,13251,
13290,13298,13299,13300,13301,13303,13343,13355,13367,13369,13370,13372,13450,13467,13469,
13471,13480,13481,13517,13528,13536,13575,13582,13588,13591,13598,13599,13608,13609,13645,
13646,13647,13648,13649,13652,13654,13655,13684,13685,13687,13690,13691,13720,13740,13747,
13748,13749,13750,13751,13852,13853,13907,13910,13915,13920,13925,13926,13927,13929,13937,
13940,13941,13943,13965,13966,13967,13968,13969,13970,13975,13980,13981,13982,13984,13986,
13987,13988,13989,13993,14003,14004,14005,14023,14024,14025,14026,14052,14057,14062,14063,
14075,14080,14087,14124,14125,14128,14129,14131,14132,14133,14134,14136,14138,14143,14146,
14147,14148,14149,14159,14166,14179,14181,14183,14184,14189,14190,14223,14224,14225,14226,
14232,14233,14235,14239,14241,14257,14258,14260,14290,14310,14311,14312,14339,14350,14354,
14355,14357,14361,14374,14377,14378,14380,14413,14429,14430,14431,14433,14435,14436,14437,
14438,14439,14440,14441,14442,14444,14445,14446,14447,14448,14449,14453,14454,14455,14456,
14457,14459,14460,14461,14462,14463,14464,14465,14467,14469,14470,14471,14472,14497,14500,
14505,14506,14507,14532,14535,14536,14537,14538,14539,14542,14543,14544,14545,14546,14547,
14550,14552,14555,14556,14561,14563,14564,14565,14568,14569,14580,14604,14605,14606,14634,
14635,14636,14641,14642,14644,14649,14650,14653,14654,14664,14666,14671,14672,14674,14681,
14776,14778,14780,14784,14796,14797,14798,14801,14803,14804,14806,14807,14808,14809,14810,
14811,14812,14813,14814,14816,14822,14825,14834
END_

! ----------------------------------------------------------------
!
! Design Response: Stiffness_Measure
!
DRESP
  ID_NAME = Stiffness_Measure
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = ENERGY_STIFF_MEASURE
  GROUP_OPER = SUM
  LC_SEL = SUM 
  LC_SET = STATIC, ALL, ALL, MAX
END_

! ----------------------------------------------------------------
!
! Design Response: Mass_DResp_1
!
DRESP
  ID_NAME = Mass_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = WEIGHT
  GROUP_OPER = SUM
END_

! ----------------------------------------------------------------
!
! Design Response: Stress_DResp_1
!
DRESP
  ID_NAME = Stress_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = SIG_TOPO_MISES
  GROUP_OPER = MAX
  LC_SET = STATIC, 1, ALL, MAX
END_

! ----------------------------------------------------------------
!
!
! Design Area: Task1_DESIGN_AREA
!
DV_TOPO
  ID_NAME = Task1_DESIGN_AREA
  EL_GROUP = ALL_ELEMENTS
END_

! ----------------------------------------------------------------
!
! Objective Function: StiffnessEnergy_Obj_Func
!
OBJ_FUNC
  ID_NAME = StiffnessEnergy_Obj_Func
  DRESP = Stiffness_Measure, 1.0
  TARGET = MIN
END_

! ----------------------------------------------------------------
!
! Constraint: Mass_Constraint_1
!
CONSTRAINT
  ID_NAME = Mass_Constraint_1
  DRESP = Mass_DResp_1
  MAGNITUDE = REL
  LE_VALUE = 0.6
END_

! ----------------------------------------------------------------
!
! Constraint: Stress_Constraint_FOS_2
!
CONSTRAINT
  ID_NAME = Stress_Constraint_FOS_2
  DRESP = Stress_DResp_1
  MAGNITUDE = ABS
  LE_VALUE = 1.83333e+08
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Frozen_ManufacConstraint_3
!
DVCON_TOPO
  ID_NAME = Frozen_ManufacConstraint_3
  EL_GROUP = FROZEN_AREA_ELEMS_GRP_1
  CHECK_TYPE = FROZEN
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Demold_ManufacConstraint_4
!
DVCON_TOPO
  ID_NAME = Demold_ManufacConstraint_4
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = CAST
  PULL_DIR = -0, 0.00635, -0
  ANGLE = 0.
  CHECK_GROUP = ALL_ELEMENTS
  MID_PLANE = STAMP
  PULL_CS = CS_0
  CREATE_PULL_GROUP = YES
END_

! ----------------------------------------------------------------
!
!
! Optimize: OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_CONTROLLER 
!
OPTIMIZE
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV = Task1_DESIGN_AREA
  OBJ_FUNC = StiffnessEnergy_Obj_Func
  DVCON = Frozen_ManufacConstraint_3
  DVCON = Demold_ManufacConstraint_4
  CONSTRAINT = Mass_Constraint_1
  CONSTRAINT = Stress_Constraint_FOS_2
  STRATEGY = TOPO_SENSITIVITY
END_

OPT_PARAM
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY_OPT_PARAM_
  OPTIMIZE = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV_UPDATE_STRATEGY = CSA
  STABILIZATION = YES
  AUTO_FROZEN = BOTH
  AUTO_FROZEN_CON = BOTH
  STOP_CRITERION_LEVEL = BOTH
  STOP_CRITERION_OBJ = 0.001
  STOP_CRITERION_DENSITY = 0.005
END_

STOP
  ID_NAME = Task-1_GLOBAL_STOP_CONDITION_
  ITER_MAX = 75
END_

